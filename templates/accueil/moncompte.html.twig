{% extends 'base.html.twig' %}

{% block title %}Mon Compte{% endblock %}

{% block body %}
    
{% if is_granted('ROLE_ADMIN') %}
 <p>Vous êtes connecté en tant que {{ app.user.username }} (Admin)</p>
{% else %}
 {% if is_granted('ROLE_USER') %}
 <p>Vous êtes connecté en tant que {{ app.user.username }} (Utilisateur)</p>
 {% endif %}
{% endif %} 
<h1>Votre Compte<h1>
        
 {{ form_start(form) }}
    {{ form_errors(form) }}
     <div class="form-group">
        {{ form_label(form.username, 'Pseudo:', {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
        <div class="col-sm-10">
            {{ form_errors(form.username) }}
            {{ form_widget(form.username) }}
            {{ form_help(form.username) }}
        </div>
    </div>
    <div class="form-group">
        {{ form_label(form.nom, 'Nom:', {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
        <div class="col-sm-10">
            {{ form_errors(form.nom) }}
            {{ form_widget(form.nom) }}
            {{ form_help(form.nom) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.prenom, 'Prénom:', {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
        <div class="col-sm-10">
            {{ form_errors(form.prenom) }}
            {{ form_widget(form.prenom) }}
            {{ form_help(form.prenom) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.datenaissance, 'Date de naissance:', {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
        <div class="col-sm-10">
            {{ form_errors(form.datenaissance) }}
            {{ form_widget(form.datenaissance) }}
            {{ form_help(form.datenaissance) }}
        </div>
    </div>

<p>Date d'inscription : {{ app.user.dateinscription|date("m-d-Y") }}</p>


    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            {{ form_widget(form.save) }}
        </div>
    </div>

    {{ form_end(form) }}



{% if app.user.nom is null or app.user.prenom is null or app.user.datenaissance is null %}
    
    <p> Veuillez compléter votre profil :
    {% if app.user.nom is null %}Nom{% endif %}
    {% if app.user.prenom is null %}Prénom{% endif %}
    {% if app.user.datenaissance is null %}Date de naissance{% endif %}</P>
    {% endif %}

{% endblock %}
